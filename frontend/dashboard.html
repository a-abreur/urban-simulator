<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Urbano | NASA Space Apps</title>
  <link rel="stylesheet" href="dashboard.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <!-- Leaflet Draw CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
</head>
<body>
  <div class="dashboard-container">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-content">
        <div class="header-left">
          <a href="index.html" class="back-button">
            <i class="fas fa-arrow-left"></i>
            Voltar
          </a>
          <div class="header-title">
            <i class="fas fa-chart-line"></i>
            <h1>Dashboard Urbano</h1>
          </div>
        </div>
        <div class="header-right">
          <!-- Toggle do Modo Escuro -->
          <div class="theme-toggle">
            <label class="theme-switch">
              <input type="checkbox" id="dark-mode-toggle">
              <span class="theme-slider">
                <i class="fas fa-sun theme-icon sun-icon"></i>
                <i class="fas fa-moon theme-icon moon-icon"></i>
              </span>
            </label>
            <span class="theme-label" id="theme-label">Modo Claro</span>
          </div>
          
          <div class="city-selector">
            <i class="fas fa-map-marker-alt"></i>
            <span id="current-city">Bras√≠lia</span>
          </div>
          <div class="last-update">
            <i class="fas fa-sync-alt"></i>
            <span id="update-time">Atualizado agora</span>
          </div>
        </div>
      </div>
    </header>

    <div class="dashboard-content">
      <!-- Sidebar -->
      <aside class="dashboard-sidebar">
        <!-- Se√ß√£o de Mapas Base -->
        <div class="sidebar-section">
          <h3>Mapa Base</h3>
          <div class="base-map-controls">
            <select id="base-map-select" class="base-map-select">
              <option value="padrao">üó∫Ô∏è Padr√£o (OSM)</option>
              <option value="satelite">üõ∞Ô∏è Sat√©lite</option>
              <option value="terreno">üèîÔ∏è Terreno</option>
              <option value="transito">üöó Tr√°fego</option>
            </select>
          </div>
        </div>

        <!-- Se√ß√£o de Camadas -->
        <div class="sidebar-section">
          <h3>Camadas de Dados</h3>
          <div class="layer-controls">
            <button class="layer-btn active" data-layer="clima">
              <i class="fas fa-cloud-sun"></i>
              <span>Dados Clim√°ticos</span>
              <i class="fas fa-check status-icon"></i>
            </button>
            <button class="layer-btn" data-layer="heatmap">
              <i class="fas fa-fire"></i>
              <span>Heatmap de Polui√ß√£o</span>
              <i class="fas fa-plus status-icon"></i>
            </button>
            <button class="layer-btn active" data-layer="estacoes">
              <i class="fas fa-building"></i>
              <span>Esta√ß√µes de Monitoramento</span>
              <i class="fas fa-check status-icon"></i>
            </button>
            <button class="layer-btn" data-layer="transito">
              <i class="fas fa-car"></i>
              <span>Tr√°fego em Tempo Real</span>
              <i class="fas fa-plus status-icon"></i>
            </button>
            <button class="layer-btn" data-layer="temperatura">
              <i class="fas fa-thermometer-full"></i>
              <span>Ilhas de Calor</span>
              <i class="fas fa-plus status-icon"></i>
            </button>
            <button class="layer-btn" data-layer="recursos">
              <i class="fas fa-tree"></i>
              <span>Recursos Naturais</span>
              <i class="fas fa-plus status-icon"></i>
            </button>
            <button class="layer-btn" data-layer="saneamento">
              <i class="fas fa-faucet"></i>
              <span>Saneamento & Energia</span>
              <i class="fas fa-plus status-icon"></i>
            </button>
            <button class="layer-btn" data-layer="feedback">
              <i class="fas fa-comments"></i>
              <span>Feedback Populacional</span>
              <i class="fas fa-plus status-icon"></i>
            </button>
          </div>
        </div>

        <!-- Se√ß√£o de Indicadores -->
        <div class="sidebar-section">
          <h3>Indicadores em Tempo Real</h3>
          <div class="indicators-grid">
            <div class="indicator-card">
              <div class="indicator-icon temp">
                <i class="fas fa-thermometer-half"></i>
              </div>
              <div class="indicator-info">
                <span class="indicator-value" id="temp-value">--¬∞C</span>
                <span class="indicator-label">Temperatura</span>
              </div>
            </div>
            <div class="indicator-card">
              <div class="indicator-icon air">
                <i class="fas fa-wind"></i>
              </div>
              <div class="indicator-info">
                <span class="indicator-value" id="air-value">--</span>
                <span class="indicator-label">Qualidade do Ar</span>
              </div>
            </div>
            <div class="indicator-card">
              <div class="indicator-icon umidity">
                <i class="fas fa-tint"></i>
              </div>
              <div class="indicator-info">
                <span class="indicator-value" id="umidity-value">--%</span>
                <span class="indicator-label">Umidade</span>
              </div>
            </div>
            <div class="indicator-card">
              <div class="indicator-icon wind">
                <i class="fas fa-fan"></i>
              </div>
              <div class="indicator-info">
                <span class="indicator-value" id="wind-value">-- km/h</span>
                <span class="indicator-label">Velocidade do Vento</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Se√ß√£o de An√°lise de Sustentabilidade -->
        <div class="sidebar-section">
          <h3>An√°lise de Sustentabilidade</h3>
          <div class="sustainability-score">
            <div class="score-circle">
              <div class="score-value" id="sustainability-score">72</div>
              <div class="score-label">Score</div>
            </div>
            <div class="score-details">
              <div class="score-item">
                <span>√Åreas Verdes</span>
                <div class="score-bar">
                  <div class="score-fill green" style="width: 85%"></div>
                </div>
                <span class="score-percent">85%</span>
              </div>
              <div class="score-item">
                <span>Transporte P√∫blico</span>
                <div class="score-bar">
                  <div class="score-fill orange" style="width: 65%"></div>
                </div>
                <span class="score-percent">65%</span>
              </div>
              <div class="score-item">
                <span>Qualidade do Ar</span>
                <div class="score-bar">
                  <div class="score-fill yellow" style="width: 70%"></div>
                </div>
                <span class="score-percent">70%</span>
              </div>
              <div class="score-item">
                <span>Saneamento</span>
                <div class="score-bar">
                  <div class="score-fill blue" style="width: 80%"></div>
                </div>
                <span class="score-percent">80%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Se√ß√£o de Ferramentas de An√°lise -->
        <div class="sidebar-section">
          <h3>Ferramentas de An√°lise</h3>
          <div class="analysis-tools">
            <button class="tool-btn" id="area-analysis-btn">
              <i class="fas fa-ruler-combined"></i>
              <span>An√°lise de √Årea</span>
              <span class="tool-badge" id="analysis-status">OFF</span>
            </button>
            <button class="tool-btn" id="report-btn">
              <i class="fas fa-file-pdf"></i>
              <span>Gerar Relat√≥rio</span>
            </button>
            <button class="tool-btn" id="compare-btn">
              <i class="fas fa-balance-scale"></i>
              <span>Comparar Regi√µes</span>
            </button>
            <button class="tool-btn" id="simulation-btn">
              <i class="fas fa-play-circle"></i>
              <span>Simular Cen√°rio</span>
            </button>
          </div>
        </div>

        <!-- Se√ß√£o de Dados de Tr√°fego -->
        <div class="sidebar-section traffic-section" id="traffic-section" style="display: none;">
          <h3>üö¶ Tr√°fego em Tempo Real</h3>
          <div class="traffic-overview">
            <div class="traffic-level-indicator">
              <span class="traffic-label">N√≠vel Geral:</span>
              <div class="traffic-level">
                <div class="traffic-fill" id="traffic-level-fill" style="width: 65%"></div>
              </div>
              <span class="traffic-percent" id="traffic-percent">65%</span>
            </div>
          </div>
          <div class="traffic-details" id="traffic-details">
            <!-- Ser√° preenchido dinamicamente -->
          </div>
        </div>

        <!-- Se√ß√£o de Feedback Populacional -->
        <div class="sidebar-section feedback-section" id="feedback-section" style="display: none;">
          <h3>üí¨ Feedback da Popula√ß√£o</h3>
          <div class="feedback-overview">
            <div class="feedback-score">
              <div class="feedback-value" id="satisfaction-score">72%</div>
              <div class="feedback-label">Satisfa√ß√£o Geral</div>
            </div>
          </div>
          <div class="feedback-categories" id="feedback-categories">
            <!-- Ser√° preenchido dinamicamente -->
          </div>
        </div>
      </aside>

      <!-- √Årea Principal do Mapa -->
      <main class="dashboard-main">
        <div class="map-container">
          <div id="map"></div>
          
          <!-- Controles do Mapa -->
          <div class="map-controls">
            <button class="map-control-btn" id="zoom-in" title="Zoom In">
              <i class="fas fa-plus"></i>
            </button>
            <button class="map-control-btn" id="zoom-out" title="Zoom Out">
              <i class="fas fa-minus"></i>
            </button>
            <button class="map-control-btn" id="current-location" title="Centralizar">
              <i class="fas fa-crosshairs"></i>
            </button>
            <button class="map-control-btn" id="fullscreen-btn" title="Tela Cheia">
              <i class="fas fa-expand"></i>
            </button>
          </div>

          <!-- Legenda do Heatmap -->
          <div class="map-legend" id="map-legend">
            <h4>üî• Legenda do Heatmap</h4>
            <div class="legend-items">
              <div class="legend-item">
                <span class="legend-color" style="background: blue"></span>
                <span>Baixa Polui√ß√£o</span>
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background: lime"></span>
                <span>Moderada</span>
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background: yellow"></span>
                <span>Alta</span>
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background: orange"></span>
                <span>Muito Alta</span>
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background: red"></span>
                <span>Cr√≠tica</span>
              </div>
            </div>
          </div>

          <!-- Legenda de Tr√°fego -->
          <div class="traffic-legend" id="traffic-legend" style="display: none;">
            <h4>üöó Legenda de Tr√°fego</h4>
            <div class="legend-items">
              <div class="legend-item">
                <span class="legend-color" style="background: green"></span>
                <span>Fluindo</span>
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background: orange"></span>
                <span>Congestionado</span>
              </div>
              <div class="legend-item">
                <span class="legend-color" style="background: red"></span>
                <span>Parado</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Painel de Informa√ß√µes -->
        <div class="info-panel" id="info-panel">
          <div class="info-header">
            <h3>üìä Informa√ß√µes da Localiza√ß√£o</h3>
            <button class="close-btn" id="close-info">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="info-content">
            <div class="info-placeholder">
              <i class="fas fa-mouse-pointer"></i>
              <p>Clique em qualquer elemento no mapa para ver detalhes</p>
            </div>
          </div>
        </div>

        <!-- Painel de An√°lise -->
        <div class="analysis-panel" id="analysis-panel" style="display: none;">
          <div class="analysis-header">
            <h3>üìà An√°lise da √Årea</h3>
            <button class="close-btn" id="close-analysis">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="analysis-content">
            <div class="analysis-results" id="analysis-results">
              <!-- Resultados da an√°lise ser√£o inseridos aqui -->
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Modal de Simula√ß√£o -->
    <div class="modal" id="simulation-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>üéØ Simular Cen√°rio Urbano</h3>
          <button class="close-btn" id="close-simulation-modal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="simulation-options">
            <div class="option-group">
              <label>üå≥ Adicionar √Åreas Verdes</label>
              <input type="range" id="green-areas" min="0" max="100" value="25">
              <span id="green-areas-value">25%</span>
            </div>
            <div class="option-group">
              <label>üöå Melhorar Transporte P√∫blico</label>
              <input type="range" id="public-transport" min="0" max="100" value="50">
              <span id="public-transport-value">50%</span>
            </div>
            <div class="option-group">
              <label>üè≠ Reduzir Polui√ß√£o Industrial</label>
              <input type="range" id="pollution-reduction" min="0" max="100" value="30">
              <span id="pollution-reduction-value">30%</span>
            </div>
          </div>
          <div class="simulation-results">
            <h4>üìä Proje√ß√£o de Impacto</h4>
            <div class="impact-metrics">
              <div class="impact-metric">
                <span>Qualidade do Ar</span>
                <div class="impact-bar">
                  <div class="impact-fill positive" style="width: 65%"></div>
                </div>
                <span class="impact-value">+15%</span>
              </div>
              <div class="impact-metric">
                <span>Score de Sustentabilidade</span>
                <div class="impact-bar">
                  <div class="impact-fill positive" style="width: 80%"></div>
                </div>
                <span class="impact-value">+12%</span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" id="cancel-simulation">Cancelar</button>
          <button class="btn-primary" id="run-simulation">Executar Simula√ß√£o</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Leaflet Heatmap -->
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <!-- Leaflet Draw -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
  <!-- Chart.js para gr√°ficos -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script src="js/dashboard.js"></script>
</body>
</html>